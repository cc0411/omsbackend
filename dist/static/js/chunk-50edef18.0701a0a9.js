(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50edef18"],{7582:function(e,t,n){},a9b4:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",[n("div",{staticClass:"d2-mt d2-mr"},[n("el-card",{staticClass:"d2-card d2-mb"},[n("div",{staticClass:"handle-box"},[n("div",{staticClass:"handle-head"},[n("h3",[e._v("SaltKey列表信息")])]),n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activetabs,callback:function(t){e.activetabs=t},expression:"activetabs"}},[n("el-tab-pane",{attrs:{label:"已认证KEYS",name:"accepted"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.AcceptedKeys.filter(function(t){return!e.search||t.minion_id.toLowerCase().includes(e.search.toLowerCase())})}},[n("el-table-column",{attrs:{label:"MinionID",prop:"minion_id"}}),n("el-table-column",{attrs:{label:"认证状态",prop:"certification_status"}}),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.handlePing(t.row)}}},[e._v("测试")]),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleKeysManage(t.row,"delete")}}},[e._v("删除")])]}}])})],1)],1),n("el-tab-pane",{attrs:{label:"待认证KEYS",name:"unaccepted"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.UnacceptedKeys.filter(function(t){return!e.search||t.minion_id.toLowerCase().includes(e.search.toLowerCase())})}},[n("el-table-column",{attrs:{label:"MinionID",prop:"minion_id"}}),n("el-table-column",{attrs:{label:"认证状态",prop:"certification_status"}}),n("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){e.handleKeysManage(t.row,"add")}}},[e._v("认证")])]}}])})],1)],1),n("el-tab-pane",{attrs:{label:"未被允许KEYS",name:"denied"}}),n("el-tab-pane",{attrs:{label:"已拒绝KEYS",name:"rejected"}})],1)],1)])],1)])},c=[],s=(n("cf54"),n("c02d")),i={name:"SaltKey",created:function(){this.getAcceptedKeys(),this.getDenideKeys(),this.getUnacceptedKeys(),this.getRejectedKeys()},data:function(){return{activetabs:"accepted",AcceptedKeys:[],DeniedKeys:[],UnacceptedKeys:[],RejectedKeys:[],status:"accepted",total:0,search:""}},methods:{getAcceptedKeys:function(){var e=this;Object(s["a"])({certification_status:"accepted"}).then(function(t){e.AcceptedKeys=t.results,e.total=t.count}).catch(function(e){console.log(e)})},getDenideKeys:function(){var e=this;Object(s["a"])({certification_status:"denied"}).then(function(t){e.DeniedKeys=t.results,e.total=t.count}).catch(function(e){console.log(e)})},getUnacceptedKeys:function(){var e=this;Object(s["a"])({certification_status:"unaccepted"}).then(function(t){e.UnacceptedKeys=t.results,e.total=t.count}).catch(function(e){console.log(e)})},getRejectedKeys:function(){var e=this;Object(s["a"])({certification_status:"rejected"}).then(function(t){e.RejectedKeys=t.results,e.total=t.count}).catch(function(e){console.log(e)})},handleClick:function(e){this.status=e.name,"unaccepted"===this.status?this.getUnacceptedKeys():"denied"===this.status?this.getDenideKeys():"rejected"===this.status?this.getRejectedKeys():this.getAcceptedKeys()},handlePing:function(e){var t=this;Object(s["d"])({minion_id:e.minion_id}).then(function(e){console.log(e),e.status?t.$message({message:e.msg,type:"success"}):t.$message.error(res.msg)}).catch(function(e){console.log(e)})},handleKeysManage:function(e,t){var n=this;"delete"===t?Object(s["c"])({minion_id:e.minion_id,type:"delete"}).then(function(e){e.status?(n.$message({message:"删除成功",type:"success"}),n.refreshSalt()):n.$message.error("删除失败")}).catch(function(e){console.log(e)}):"add"===t?Object(s["c"])({minion_id:e.minion_id,type:"add"}).then(function(e){e.status?n.$message({message:e.msg,type:"success"}):n.$message.error("认证失败")}).catch(function(e){console.log(e)}):"rejected"===t&&Object(s["c"])({minion_id:e.minion_id,type:"rejected"}).then(function(e){e.status?n.$message({message:e.msg,type:"success"}):n.$message.error("失败了！")}).catch(function(e){console.log(e)})}}},o=i,r=(n("de11"),n("048f")),l=Object(r["a"])(o,a,c,!1,null,"f67d6758",null);l.options.__file="SaltKey.vue";t["default"]=l.exports},c02d:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return l});var a=n("9bd2"),c="http://127.0.0.1:8000";function s(e){return Object(a["a"])({url:"".concat(c,"/api/minionlist/"),method:"get",params:e})}function i(e){return Object(a["a"])({url:"".concat(c,"/salt/refreshsalt/"),method:"get",params:e})}function o(e){return Object(a["a"])({url:"".concat(c,"/api/saltkey/"),method:"get",params:e})}function r(e){return Object(a["a"])({url:"".concat(c,"/salt/ping/"),method:"get",params:e})}function l(e){return Object(a["a"])({url:"".concat(c,"/salt/keys/"),method:"get",params:e})}},de11:function(e,t,n){"use strict";var a=n("7582"),c=n.n(a);c.a}}]);
//# sourceMappingURL=chunk-50edef18.0701a0a9.js.map